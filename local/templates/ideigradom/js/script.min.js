!function(e){"function"==typeof define&&define.amd?define("init",e):e()}((function(){"use strict";var e=function(){return window.matchMedia("(min-width: 320px)").matches},t=function(){return window.matchMedia("(min-width: 1260px)").matches},n=function(){return window.matchMedia("(max-width: 1259px)").matches},a=function(){return window.matchMedia("(max-width: 767px)").matches},o=500,i=10,r=1e3,s=300,l=6e3,c="Заполните это поле",d="Введите корректный email",u="Введите как минимум 2 символа";function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}var m=function(e){var t=window.innerWidth;window.addEventListener("resize",(function(){t!==window.innerWidth&&("function"==typeof e&&e(),t=window.innerWidth)}))},p=function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))},g=function(){var e;e=$(window).width()<=415?"width=375, user-scalable=no":"width=device-width, user-scalable=no",document.querySelector("meta[name=viewport]").setAttribute("content",e)},y=function(){var e,t=document.querySelectorAll(".js-scrollbar");(e=t).length&&e.forEach((function(e){return new window.SimpleBar(e)}))},b=function(){var e=document.querySelectorAll(".js-fixed-block"),t=document.querySelector(".footer");window.addEventListener("scroll",(function(){e.forEach((function(e){var n,a,o,i,r,s=e.parentNode;a=(n=s).getBoundingClientRect().top,o=n.getBoundingClientRect().bottom,i=t.getBoundingClientRect().top,r=window.innerHeight,a>=0&&a<=r||o>=0&&o<=r||i<r?e.classList.remove("fixed"):e.classList.add("fixed")}))}))},w=function(){function e(e,t){var n=$('[data-toggle="'.concat(e,'"]'));t.hasClass("opened")?function(e,t){$('[data-toggle="'.concat(e,'"]')).slideUp(s),t.removeClass("opened")}(e,t):(n.slideDown(s),t.addClass("opened"))}$("[data-toggle-btn]").each((function(e,t){var n=$(t).attr("data-toggle-btn"),a=$(t).parents("[data-toggle-container]"),o=$('[data-toggle="'.concat(n,'"]'));a.hasClass("opened")&&o.css("display","block")})),m((function(){$("[data-toggle]").css("display",""),$("[data-toggle-container]").removeClass("opened")})),$("body").on("click","[data-toggle-btn]",(function(t){t.preventDefault(),t.stopPropagation();var n=$(t.currentTarget);e(n.attr("data-toggle-btn"),n.parents("[data-toggle-container]"))}))},L=function(){document.documentElement.addEventListener("click",(function(e){var t=e.target;t===t.closest(".js-modal-open")&&function(e){e.preventDefault();var t=e.target.getAttribute("data-src");$.fancybox.close(),$.fancybox.open({src:t,type:"inline",touch:!1,autoFocus:!1,btnTpl:{smallBtn:'<button type="button" class="modal__close-btn btn js-modal-close" title="Close"><svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M6.66663 6.6665L20 19.9998M33.3333 33.3332L20 19.9998M20 19.9998L6.66663 33.3332M20 19.9998L33.3333 6.6665" stroke="#4E3D35" stroke-width="2" stroke-linecap="round"/>\n        </svg></button>'},afterLoad:function(t){var n=$(e.target);if(-1!==n.attr("data-src").indexOf("modal-add-cart")){var a=n.parents(".prod-card"),o=t.current.$content.find(".modal__prod-card"),i=a.clone();i.addClass("modal__prod-card prod-card--modal").removeClass("grid__block"),i.find(".prod-card__info-right").remove(),i.find(".prod-card__fav").remove(),i.find(".prod-card__cost").addClass("cost--small"),o.html(i)}}})}(e),t===t.closest(".js-modal-close")&&$.fancybox.close()}))};function S(e){!e.val().length>=1&&!e.is(":focus")?e.parent().removeClass("is-changed"):e.parent().addClass("is-changed")}var k=function(){var e=document.querySelector(".cart");function t(e,t){var n=e.querySelector("[data-amount]");if(!n)return!1;var a=e.querySelector("[data-cost]").getAttribute("data-cost");n.innerHTML=t<=1?"".concat(t," шт."):"".concat(t," шт. × ").concat(a,"₽")}function n(e,n){var a=e.querySelector("[data-cost]"),o=a.getAttribute("data-cost");o=parseInt(o,10),a.setAttribute("data-new-cost",o*n),a.innerHTML=(o*n).toLocaleString()+"<span>₽</span>",function(e,t){var n=e.querySelector("[data-old-cost]");if(!n)return!1;var a=n.getAttribute("data-old-cost");e.querySelector("[data-cost]").getAttribute("data-new-cost");var o=(a=parseInt(a,10))*t;n.innerHTML="".concat(o.toLocaleString(),"₽"),e.classList.add("discount")}(e,n),t(e,n)}function a(t){if(!e)return!1;var n=e.querySelectorAll("[data-total-amount]"),a=function(e,t){var n=t[0],a=(e=Math.abs(e)%100)%10;return e>10&&e<20?n=t[0]:a>1&&a<5?n=t[1]:1===a&&(n=t[2]),n}(t,[" товаров"," товара"," товар"]);n.forEach((function(e){e.textContent=t+a})),$(".header__amount-num").html(t),0==t?$(".header__cart").addClass("empty"):$(".header__cart").removeClass("empty")}function o(o,i){var r;n(o,i),t(o,i),(r=document.querySelectorAll(".js-total")).length&&r.forEach((function(e){var t=$(e).parents(".cart")[0].querySelectorAll(".js-cart-item"),n=0,a=0;t.forEach((function(e){var t=e.querySelector("[data-old-cost]"),o=e.querySelector("[data-new-cost]"),i=e.querySelector(".js-handler-input").value;n+=t?parseInt(t.getAttribute("data-old-cost")*i,10):parseInt(o.getAttribute("data-cost")*i,10),a+=parseInt(o.getAttribute("data-new-cost"),10)}));var o=e.querySelector("[data-cost]");o&&(o.innerHTML=n.toLocaleString()+"₽");var i=$("[data-total]");$(i).html(a.toLocaleString()+"<span>₽</span>"),$("[data-header-total]").html(a.toLocaleString()+" ₽")})),function(){var e=document.querySelector(".js-total");if(!e)return!1;var t=e.querySelector(".discount"),n=e.querySelector("[data-discount]"),a=document.querySelectorAll(".js-cart-item"),o=0,i=0;[].forEach.call(a,(function(e){var t=e.querySelector("[data-old-cost]"),n=e.querySelector("[data-cost]"),a=e.querySelector(".js-handler-input").value,r=parseInt(n.getAttribute("data-cost"),10);if(t){var s=parseInt(t.getAttribute("data-old-cost"),10);i=(r-s)*a}else i=0;o+=i})),t.style.display=0==o?"none":"",n.innerHTML=o.toLocaleString()+"₽"}(),a(function(){if(!e)return!1;var t=0;return e.querySelectorAll(".js-handler-input").forEach((function(e){t+=parseInt(e.value,10)})),t}());var s=document.querySelector(".order__total");s&&(s.style.display="block")}window.addEventListener("click",(function(t){var n=t.target,a=document.querySelectorAll(".js-cart-item");if(n===n.closest(".js-handler")){var i=n.nextElementSibling||n.previousElementSibling,r=0;r=i.value,r=parseInt(r,10),n.hasAttribute("data-minus")&&r>n.getAttribute("data-min")?r-=1:n.hasAttribute("data-plus")&&r<n.getAttribute("data-max")&&(r+=1),i.value=r,o($(i).parents(".js-cart-item")[0],r)}else if(n===n.closest("[data-delete]")&&a.length){$(n).parents(".js-cart-item").remove(),$(".js-cart-item").length||e.classList.add("cart--empty"),document.querySelectorAll("[data-old-cost]").length||$("[data-discount]").parent().hide(),a.forEach((function(e){var t=e.querySelector(".js-handler-input");o(e,t.value)}))}}));var i=document.querySelectorAll(".js-cart-item");[].forEach.call(i,(function(e){var t=e.querySelector(".js-handler-input"),n=t.value,a=t.previousElementSibling?t.previousElementSibling.getAttribute("data-min"):"",i=t.nextElementSibling?t.nextElementSibling.getAttribute("data-max"):"";o(e,n),t.addEventListener("input",(function(t){var n=t.target;n.value=Math.min(i,Math.max(a,n.value)),o(e,n.value)})),t.addEventListener("keypress",(function(e){!function(e,t){var n=e||window.event,a=n.keyCode||n.which;a=String.fromCharCode(a),t.test(a)||(n.returnValue=!1,n.preventDefault&&n.preventDefault())}(e,/[0-9]|\./)}))}))},C=function(){function e(t,n,a,o,i){var r=this;v(this,e),this.el=t,this.properties=n,this.minNumber=a,this.resolution=o,this.cb=i,this.onWidthResize=function(){return r.onResize()}}return h(e,[{key:"getSliderLength",value:function(){return this.el.querySelectorAll(".swiper-slide")}},{key:"makeSlider",value:function(e){var t=e.el,n=e.autoplay,a=void 0!==n&&n,o=e.speed,r=void 0===o?400:o,s=e.effect,l=void 0===s?"none":s,c=e.fadeEffect,d=void 0===c?{}:c,u=e.loop,v=void 0!==u&&u,f=e.slideToClickedSlide,h=void 0!==f&&f,m=e.breakpoints,p=void 0===m?{767:{centeredSlides:!1,loop:!1}}:m,g=e.direction,y=void 0===g?"horizontal":g,b=e.pagination,w=void 0===b?{el:t.querySelector(".swiper-pagination")||t.parentNode.querySelector(".swiper-pagination"),type:"bullets",clickable:!0}:b;if(t){var L=t.querySelector(".swiper-button-prev")||t.parentNode.querySelector(".swiper-button-prev"),S=t.querySelector(".swiper-button-next")||t.parentNode.querySelector(".swiper-button-next");return new window.Swiper(t,{slidesPerView:"auto",observer:!0,observeParents:!0,observeSlideChildren:!0,preventInteractionOnTransition:!0,preventClicksPropagation:!0,slideToClickedSlide:h,direction:y,autoplay:a,speed:r,loop:v,centeredSlides:!1,effect:l,fadeEffect:d,navigation:{nextEl:S,prevEl:L},pagination:w,breakpoints:p,onTouchStart:function(){allowClick=!0},onTouchMove:function(){allowClick=!1},onTouchEnd:function(){setTimeout((function(){allowClick=!0}),i)},on:{init:function(){this.el.classList.add("start")},reachBeginning:function(){this.el.classList.remove("end"),this.el.classList.add("start")},slideChange:function(){this.el.classList.remove("start"),this.el.classList.remove("end"),0===this.activeIndex&&(this.el.classList.add("start"),this.el.classList.remove("end"))},reachEnd:function(){this.el.classList.remove("start"),this.el.classList.add("end")}}})}}},{key:"destroySlider",value:function(e){return void 0!==e&&(e.destroy(!0,!0),e=void 0),e}},{key:"onLoad",value:function(){return void 0===this.slider&&this.resolution()&&this.getSliderLength().length>this.minNumber?(this.slider=this.makeSlider(this.properties),this.el.classList.remove("disabled"),"function"==typeof this.cb&&this.cb()):(!this.resolution()||this.getSliderLength().length<=this.minNumber)&&this.el.classList.add("disabled"),this.slider}},{key:"onResize",value:function(){var e=this;this.slider=this.destroySlider(this.slider),setTimeout((function(){e.slider=e.onLoad()}),i)}},{key:"initSlider",value:function(){return!!this.el&&(this.slider=this.onLoad(),m(this.onWidthResize),this.slider)}},{key:"init",get:function(){return this.initSlider()}}]),e}(),q={};function E(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=this;i.minSlides=e,i.el=t,i.props=a;var r=function(){return i.properties={el:i.el},i.properties=Object.assign(a,i.properties),i.properties};return i.slider=new C(i.el,r(),i.minSlides,n,o),i.slider.init,i.slider}window.addEventListener("DOMContentLoaded",(function(){q.reviews=new E(1,document.querySelector(".js-reviews-slider"),e,{effect:"fade",fadeEffect:{crossFade:!0}}),q.banner=new E(1,document.querySelector(".js-banner-slider"),e,{effect:"fade",fadeEffect:{crossFade:!0},speed:r,autoplay:{delay:l},loop:!0}),q.products={};for(var t=document.querySelectorAll(".js-products-slider"),o=0;o<t.length;o++){var i=new E(4,t[o],e);q.products[o]=Object.assign(i)}q.collections=new E(1,document.querySelector(".js-collections-slider"),e),q.mobProducts=new E(2,document.querySelector(".js-mob-products-slider"),a),q.productDetail=new E(2,document.querySelector(".js-prod-detail-slider"),n)}));var _=function(){function e(t,n,a,o,i){var r=this;v(this,e),this.el=t,this.cb=i,this.isOverlay=n,this.isHover=a,this.isNoBodyScroll=o,this.onLoad=function(){return r.addEventListeners()},this.onResize=function(){return r.closeMenu()},this.setTimeoutConst,this.header=document.querySelector(".js-header"),this.overlay=document.querySelector(".js-overlay")}return h(e,[{key:"closeMenu",value:function(){var e=this;this.el.classList.remove("animation"),this.overlay&&this.overlay.classList.remove("animation"),this.header.classList.remove("hide"),setTimeout((function(){e.el.classList.remove("opened"),e.overlay&&e.isOverlay&&e.overlay.classList.remove("is-viewed"),e.isNoBodyScroll&&document.body.classList.remove("no-scroll"),$(".filter").removeClass("changed")}),s)}},{key:"openMenu",value:function(e){var t=this;e.target.getAttribute("data-menu")===this.el.getAttribute("data-menu")&&(this.el.classList.contains("opened")?this.closeMenu():(this.el.classList.add("opened"),this.header.classList.add("hide"),this.overlay&&this.isOverlay&&this.overlay.classList.add("is-viewed"),this.isNoBodyScroll&&document.body.classList.add("no-scroll"),setTimeout((function(){t.el.classList.add("animation"),t.overlay&&t.isOverlay&&t.overlay.classList.add("animation")}),i)))}},{key:"mouseOut",value:function(){clearTimeout(this.setTimeoutConst)}},{key:"hoverMenu",value:function(e){var t=this;e.target.getAttribute("data-menu")===this.el.getAttribute("data-menu")&&(this.setTimeoutConst=setTimeout((function(){t.el.classList.add("opened"),t.overlay&&t.isOverlay&&t.overlay.classList.add("is-viewed"),t.isNoBodyScroll&&document.body.classList.add("no-scroll"),setTimeout((function(){t.el.classList.add("animation"),t.overlay&&t.isOverlay&&t.overlay.classList.add("animation")}),i)}),s))}},{key:"addEventListeners",value:function(){var e=this,n=document.querySelectorAll(".js-menu-open"),a=document.querySelectorAll(".js-menu-close"),o=function(){return e.closeMenu()},i=function(t){return e.openMenu(t)};n.length&&[].forEach.call(n,(function(e){e.addEventListener("click",i)})),a.length&&[].forEach.call(a,(function(e){e.addEventListener("click",o)})),this.overlay&&this.isOverlay&&(this.overlay.addEventListener("click",o),t()&&this.isHover&&this.overlay.addEventListener("mouseover",o))}},{key:"initMenu",value:function(){this.el&&(this.onLoad(),m(this.onResize))}}]),e}();function j(e,t,n,a){var o=this;return o.el=e,o.isOverlay=t,o.isHover=n,o.isNoBodyScroll=a,o.menu=new _(o.el,o.isOverlay,o.isHover,o.isNoBodyScroll),o.menu.initMenu(),o.menu}var A=[];window.addEventListener("DOMContentLoaded",(function(){A.push(new j(document.querySelector(".js-header"),!1,!1,!0)),A.push(new j(document.querySelector(".js-filter"),!0,!1,!0))})),window.loadingStart=function(e,t){var n=document.querySelector(".js-loader");if(e){var a=document.querySelector(".js-overlay");document.body.classList.add("loading"),a.classList.add("is-viewed"),setTimeout((function(){document.body.classList.add("no-scroll"),a.classList.add("animation")}),i)}else{if(!t||null===t&&!n)return;t.classList.add("loading"),t.appendChild(n)}},window.loadingEnd=function(){var e=document.querySelector(".js-loader");if(document.body.classList.contains("loading")){var t=document.querySelector(".js-overlay");t.classList.remove("animation"),setTimeout((function(){document.body.classList.remove("no-scroll"),document.body.classList.remove("loading"),t.classList.remove("is-viewed")}),s)}else{var n=document.querySelector(".loading");if(!n||null===n&&!e)return;n.classList.remove("loading"),n.removeChild(e),document.body.appendChild(e)}},window.addEventListener("DOMContentLoaded",(function(){var e;p(),g(),function(){var e=[].slice.call(document.querySelectorAll("img.lazy"));if("IntersectionObserver"in window){var t=new IntersectionObserver((function(e,n){e.forEach((function(e){if(e.isIntersecting){var n=e.target;n.src=n.dataset.src,n.srcset=n.dataset.srcset,t.unobserve(n),setTimeout((function(){n.classList.remove("lazy")}),o)}}))}));e.forEach((function(e){t.observe(e)}))}}(),y(),w(),function(){function e(e){document.querySelectorAll("[data-tab-block]").forEach((function(t){t.getAttribute("data-tab-block")===e.getAttribute("data-tab")?(t.classList.add("active"),e.classList.add("active"),$(t).siblings().removeClass("active")):t.getAttribute("data-tab-block")===e.getAttribute("data-tab-close")&&(t.classList.remove("active"),e.classList.remove("active"))}))}function t(t){var n=t.target;n===n.closest("[data-tab]")?($(n).parent().siblings().find(".active").removeClass("active"),-1!==n.getAttribute("data-tab").indexOf("city-all")&&document.querySelectorAll("[data-tab-block]").forEach((function(e){-1!==e.getAttribute("data-tab-block").indexOf("city")&&e.classList.add("active")})),e(n)):n===n.closest("[data-tab-close]")&&($(n).parents(".lk__personal").find("[data-tab]").removeClass("active"),e(n))}document.addEventListener("click",t),document.addEventListener("mouseover",(function(e){e.target.hasAttribute("data-tab-hover")&&t(e)})),$("[data-tab]").on("change",(function(t){var n=t.target;$(n).prop("checked")&&e(n)}))}(),$("body").on("click",".js-btn",(function(e){e.preventDefault(),e.stopPropagation(),$(e.target).toggleClass("active")})),$("body").on("click",".js-lk-btn",(function(e){return $(".js-lk").toggleClass("opened")})),$("body").on("click",".js-lk-cancel",(function(e){return $(".js-lk").removeClass("opened")})),$("body").on("click","[data-view-btn]",(function(e){e.preventDefault(),e.stopPropagation();var t=$(e.target),n=$(".cat__grid");t.addClass("active"),t.siblings().removeClass("active"),"row"===t.attr("data-view-btn")?n.removeClass("columns"):"column"===t.attr("data-view-btn")&&n.addClass("columns")})),function(){var e=document.querySelector(".js-header");if(e){var t=document.documentElement,a=null,i=0;window.addEventListener("scroll",(function(){if(0!==t.scrollTop?e.classList.add("fixed"):e.classList.remove("fixed"),n()){null!==a&&clearTimeout(a);var r=t.scrollTop;r>i?(e.classList.add("hide"),a=setTimeout((function(){e.classList.remove("hide")}),o)):e.classList.remove("hide"),i=r}}))}}(),b(),$(".js-video").length&&$("body").on("click",".js-video-btn",(function(e){var t=$(e.target).parents(".js-video"),n=t.find("video")[0];t.hasClass("play")||(t.addClass("play"),n.play())})),L(),$(".form__input input").each((function(e,t){S($(t))})),$("body").on("focus",".form__input input",(function(e){return $(e.target).parent().addClass("is-changed")})),$("body").on("blur",".form__input input",(function(e){return S($(e.target))})),$("body").on("input propertychange",".form__input input",(function(e){return S($(e.target))})),$('input[type="tel"]').inputmask({mask:"+7 (999) 999-99-99",clearMaskOnLostFocus:!0,showMaskOnHover:!1,clearIncomplete:!1}),$('input[type="email"]').inputmask({mask:"____@___.__",clearMaskOnLostFocus:!0}),window.autosize($("textarea")),function(){var e={required:!0,messages:{required:c,email:d,minlength:u}};$.validator.addMethod("telInputMaskValidation",(function(e,t){return this.optional(t)||-1==e.indexOf("_")}),"Введите полностью телефон");var t=Object.assign({email:!0},e),n=Object.assign({telInputMaskValidation:!0},e),a={errorElement:"span",highlight:function(e,t,n){$(e).parent().addClass(t).removeClass(n)},unhighlight:function(e,t,n){$(e).parents(".error").removeClass(t).addClass(n)}};$(".validate-form").each((function(e,t){$(t).validate(a)})),$("input").each((function(a,o){o.hasAttribute("data-required")&&("email"==o.type?$(o).rules("add",t):"tel"==o.type?$(o).rules("add",n):$(o).rules("add",e))}));var o=function(e){var t=$(this);t.valid()?t.parent().addClass("sent"):(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.valid())};$(".validate-form").each((function(e,t){$(t).on("submit",o)}))}(),k(),$(".filter").length&&($("body").on("change",".filter input",(function(e){$(".filter").addClass("changed"),$(".cat__filter-btn").attr("data-count",$(".filter input:checked").length),$(".filter input:checked").length>0?$(".cat__filter-btn").addClass("active"):$(".cat__filter-btn").removeClass("active")})),$("body").on("click",'[data-toggle-btn="filter"]',(function(e){$(".cat__toggle").hasClass("opened")?localStorage.setItem("filterIsOpen","open"):localStorage.setItem("filterIsOpen","close")})),"open"===localStorage.getItem("filterIsOpen")&&$('[data-toggle-btn="filter"]').trigger("click")),(e=$("[data-select]")).length&&($("body").on("click","[data-select-link]",(function(t){var n=$(t.target),a=n.data("select-link");n.parents("[data-select]").find("[data-select-btn] span").text(a),e.addClass("nohover")})),e.mouseover((function(){$(this).removeClass("nohover")}))),function(){$("body").on("click","[data-slide-btn]",(function(e){var n=$(e.target);if(t()){var a=n.attr("data-slide-btn");$("html, body").animate({scrollTop:$('[data-slide="'.concat(a,'"]')).offset().top-$("header").outerHeight(!0)},s)}}));var e=0;$(window).on("scroll",(function(){var t,n=$(window).scrollTop();n>e?$("[data-slide]").each((function(e,n){var a=$(n);a.offset().top-$(window).scrollTop()-$("header").outerHeight(!0)<=0&&(t=$('[data-slide-btn="'.concat(a.attr("data-slide"),'"]')))})):$("[data-slide]").each((function(e,n){var a=$(n);a.offset().top+a.outerHeight(!0)-($(window).scrollTop()+screen.height)<=0&&(t=$('[data-slide-btn="'.concat(a.attr("data-slide"),'"]')))})),t.addClass("active"),t.siblings().removeClass("active"),e=n}))}()})),window.addEventListener("resize",(function(){p(),g()}))}));